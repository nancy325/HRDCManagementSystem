@* Views/Shared/_SidebarAdmin.cshtml *@
@functions {
    string IsActive(string controller, string action = null)
    {
        var routeData = ViewContext.RouteData;
        var currentController = routeData.Values["controller"]?.ToString();
        var currentAction = routeData.Values["action"]?.ToString();

        bool controllerMatches = string.Equals(controller, currentController, StringComparison.OrdinalIgnoreCase);
        bool actionMatches = action == null || string.Equals(action, currentAction, StringComparison.OrdinalIgnoreCase);

        return controllerMatches && actionMatches ? "active" : "";
    }
}

<link href="~/css/admin-sidebar.css" rel="stylesheet" />

<div class="admin-sidebar d-flex flex-column justify-content-between h-100 shadow-sm bg-white">
    <!-- 🔹 Logo Section -->
    <div>
        <div class="logo-container text-center py-4 border-bottom">
            <img src="~/images/hrdc-logo.png" alt="HRDC Logo" class="sidebar-logo mb-2" style="height: 60px;" />
            <h6 class="fw-semibold text-primary mb-0">HRDC Admin</h6>
        </div>

        <!-- 🔹 Navigation Menu -->
        <ul class="sidebar-nav list-unstyled px-2 mt-3">
            <li class="nav-item mb-1">
                <a href="/Admin/Dashboard" class="nav-link d-flex align-items-center px-3 py-2 rounded @IsActive("Admin", "Dashboard")">
                    <i class="nav-icon bi bi-speedometer2 me-2"></i>
                    <span class="nav-text">Dashboard</span>
                </a>
            </li>
            <li class="nav-item mb-1">
                <a href="/AdminReport/Reports" class="nav-link d-flex align-items-center px-3 py-2 rounded @IsActive("AdminReport", "Reports")">
                    <i class="nav-icon bi bi-graph-up me-2"></i>
                    <span class="nav-text">Training Reports</span>
                </a>
            </li>
            <li class="nav-item mb-1">
                <a href="/Admin/Employees" class="nav-link d-flex align-items-center px-3 py-2 rounded @IsActive("Admin", "Employees")">
                    <i class="nav-icon bi bi-people me-2"></i>
                    <span class="nav-text">Employees</span>
                </a>
            </li>
            <li class="nav-item mb-1">
                <a href="/Training/TrainingIndex" class="nav-link d-flex align-items-center px-3 py-2 rounded @IsActive("Training", "TrainingIndex")">
                    <i class="nav-icon bi bi-mortarboard me-2"></i>
                    <span class="nav-text">Trainings</span>
                </a>
            </li>
            <li class="nav-item mb-1">
                <a href="/Admin/Registrations" class="nav-link d-flex align-items-center px-3 py-2 rounded @IsActive("Admin", "Registrations")">
                    <i class="nav-icon bi bi-clipboard-check me-2"></i>
                    <span class="nav-text">Registrations</span>
                </a>
            </li>
            <li class="nav-item mb-1">
                <a href="/Admin/Attendance" class="nav-link d-flex align-items-center px-3 py-2 rounded @IsActive("Admin", "Attendance")">
                    <i class="nav-icon bi bi-calendar-check me-2"></i>
                    <span class="nav-text">Attendance</span>
                </a>
            </li>
            <li class="nav-item mb-1">
                <a asp-controller="Assessment" asp-action="Index" class="nav-link d-flex align-items-center px-3 py-2 rounded @IsActive("Assessment", "Index")">
                    <i class="nav-icon bi bi-clipboard-data me-2"></i>
                    <span class="nav-text">Assessment</span>
                </a>
            </li>
            <li class="nav-item mb-1">
                <a href="/Admin/Certificates" class="nav-link d-flex align-items-center px-3 py-2 rounded @IsActive("Admin", "Certificates")">
                    <i class="nav-icon bi bi-award me-2"></i>
                    <span class="nav-text">Certificates</span>
                </a>
            </li>
            <li class="nav-item mb-1">
                <a href="/Admin/Notifications" class="nav-link d-flex align-items-center px-3 py-2 rounded @IsActive("Admin", "Notifications")">
                    <i class="nav-icon bi bi-bell me-2"></i>
                    <span class="nav-text">Notifications</span>
                </a>
            </li>
            <li class="nav-item mb-1">
                <a href="/Feedback/TrainingFeedbacks" class="nav-link d-flex align-items-center px-3 py-2 rounded @IsActive("Feedback")">
                    <i class="nav-icon bi bi-chat-left-text me-2"></i>
                    <span class="nav-text">Feedback</span>
                </a>
            </li>
            <li class="nav-item mb-1">
                <a href="/Admin/Settings" class="nav-link d-flex align-items-center px-3 py-2 rounded @IsActive("Admin", "Settings")">
                    <i class="nav-icon bi bi-gear me-2"></i>
                    <span class="nav-text">Settings</span>
                </a>
            </li>
        </ul>
    </div>

    <!-- 🔹 Footer / User Info -->
    <div class="sidebar-footer border-top px-3 py-3">
        <div class="d-flex align-items-center mb-3">
            <div class="admin-avatar bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-2" style="width: 40px; height: 40px;">
                <i class="bi bi-person-badge"></i>
            </div>
            <div>
                <div class="fw-semibold">@((User.Identity?.Name) ?? "Admin User")</div>
                <small class="text-muted">System Administrator</small>
            </div>
        </div>
        <form asp-controller="Account" asp-action="Logout" method="post" class="d-grid">
            <button type="submit" class="btn btn-outline-danger btn-sm">
                <i class="bi bi-box-arrow-right me-1"></i> Logout
            </button>
        </form>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const links = document.querySelectorAll('.admin-sidebar .nav-link');
        links.forEach(link => {
            link.addEventListener('mouseenter', () => link.classList.add('hovered'));
            link.addEventListener('mouseleave', () => link.classList.remove('hovered'));
        });
    });
</script>
