@model IEnumerable<HRDCManagementSystem.Models.ViewModels.TrainingAssessmentViewModel>

<div class="container mt-4">
    <h3>Assessments</h3>

    <form method="get" class="mb-3">
        <div class="input-group">
            <input type="text" name="search" class="form-control" placeholder="Search by training title..." value="@Context.Request.Query["search"]" />
            <button type="submit" class="btn btn-outline-secondary">Search</button>
        </div>
    </form>

    <table class="table table-bordered table-striped">
        <thead>
            <tr>
                <th>Title</th>
                <th>Trainer</th>
                <th>Test Link</th>
                <th>Available From</th>
                <th>Available Until</th>
                <th>Marks Entry</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var t in Model)
            {
                <tr>
                    <td>@t.Title</td>
                    <td>@t.TrainerName</td>
                    <td>
                        @if (!string.IsNullOrEmpty(t.GoogleFormTestLink))
                        {
                            <a href="@t.GoogleFormTestLink" target="_blank">View Test</a>
                        }
                    </td>
                    <td>@t.TestAvailableFrom?.ToShortDateString()</td>
                    <td>@t.TestAvailableUntil?.ToShortDateString()</td>
                    <td>@(t.IsMarksEntry == true ? $"Yes (Out of {t.MarksOutOf})" : "No")</td>
                    <td>
                        @if (t.IsMarksEntry == true)
                        {
                            <a asp-action="ManageMarks" asp-route-id="@t.TrainingSysID" class="btn btn-sm btn-primary">Enter Marks</a>
                        }
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
